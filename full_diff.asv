function df = full_diff(f)
    fsym = symvar(f);
    df = sym(0);
    for s = fsym
        df = df + diff(f,s) * sym(['d',char(s)]);
    end

    syms(symvar(df));
    for s = fsym
        eq=sym(['d',char(s)])^2
        df=subs(df,['d',char(s)]',0);
    end

    df=simplify(df);
end